<header class='sticky top-0 z-50 bg-[#121212] border-b border-gray-800 backdrop-blur-sm bg-opacity-95 shadow-lg'>
  <div class='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8'>
    <div class='flex items-center justify-between h-16 md:h-20'>
      
      <!-- Logo Section -->
      <div class='flex-shrink-0'>
        <a href="/home" class='block transition-transform duration-200 hover:scale-105'>
          <img src="/images/logo.png" alt="logo" class='h-8 md:h-10 w-auto' />
        </a>
      </div>

      <!-- Desktop Navigation -->
      <nav class='hidden lg:flex items-center space-x-1 flex-1 justify-center mx-8'>
        <% categories.forEach(category => { %>
        <a href='/categoryView?fetchCategory=<%= category._id %>' 
           class='px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-[#364151] rounded-lg transition-all duration-200 ease-in-out transform hover:scale-105'>
          <%= category.collectionName.charAt(0).toUpperCase() + category.collectionName.slice(1).toLowerCase() %>
        </a>
        <% }) %>
        <a href="/allProducts" 
           class='px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-[#364151] rounded-lg transition-all duration-200 ease-in-out transform hover:scale-105'>
          All Products
        </a>
      </nav>

      <!-- Right Side Actions -->
      <div class='flex items-center space-x-4'>
        
        <!-- Action Icons -->
        <div class='flex items-center space-x-3'>
          <!-- Wishlist -->
          <a href="/wishList" class="relative group p-2 rounded-lg hover:bg-[#364151] transition-all duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="fill-gray-400 group-hover:fill-red-400 transition-colors duration-200" viewBox="0 0 64 64">
              <path d="M45.5 4A18.53 18.53 0 0 0 32 9.86 18.5 18.5 0 0 0 0 22.5C0 40.92 29.71 59 31 59.71a2 2 0 0 0 2.06 0C34.29 59 64 40.92 64 22.5A18.52 18.52 0 0 0 45.5 4ZM32 55.64C26.83 52.34 4 36.92 4 22.5a14.5 14.5 0 0 1 26.36-8.33 2 2 0 0 0 3.27 0A14.5 14.5 0 0 1 60 22.5c0 14.41-22.83 29.83-28 33.14Z"></path>
            </svg>
            <span class="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200"></span>
          </a>

          <!-- Cart -->
          <a href="/cart" class="relative group p-2 rounded-lg hover:bg-[#364151] transition-all duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="fill-gray-400 group-hover:fill-blue-400 transition-colors duration-200" viewBox="0 0 512 512">
              <path d="M164.96 300.004h.024c.02 0 .04-.004.059-.004H437a15.003 15.003 0 0 0 14.422-10.879l60-210a15.003 15.003 0 0 0-2.445-13.152A15.006 15.006 0 0 0 497 60H130.367l-10.722-48.254A15.003 15.003 0 0 0 105 0H15C6.715 0 0 6.715 0 15s6.715 15 15 15h77.969c1.898 8.55 51.312 230.918 54.156 243.71C131.184 280.64 120 296.536 120 315c0 24.812 20.188 45 45 45h272c8.285 0 15-6.715 15-15s-6.715-15-15-15H165c-8.27 0-15-6.73-15-15 0-8.258 6.707-14.977 14.96-14.996zM477.114 90l-51.43 180H177.032l-40-180zM150 405c0 24.813 20.188 45 45 45s45-20.188 45-45-20.188-45-45-45-45 20.188-45 45zm45-15c8.27 0 15 6.73 15 15s-6.73 15-15 15-15-6.73-15-15 6.73-15 15-15zm167 15c0 24.813 20.188 45 45 45s45-20.188 45-45-20.188-45-45-45-45 20.188-45 45zm45-15c8.27 0 15 6.73 15 15s-6.73 15-15 15-15-6.73-15-15 6.73-15 15-15zm0 0"></path>
            </svg>
          </a>
        </div>

        <!-- User Authentication Section -->
        <% if (!user) { %>
        <a href="/login" class="group relative overflow-hidden px-6 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl">
          <span class="relative z-10">Sign In</span>
        </a>
        <% } else { %>
        <div class='flex items-center space-x-3'>
          <a href="/userProfile" class="group p-2 rounded-lg hover:bg-[#364151] transition-all duration-200">
            <svg class="w-5 h-5 fill-gray-400 group-hover:fill-blue-400 transition-colors duration-200" viewBox="0 0 24 24">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
          </a>
          <a href="/logout" class="group flex items-center px-4 py-2 text-sm font-medium text-gray-300 hover:text-white bg-gray-800 hover:bg-red-600 rounded-lg transition-all duration-200 transform hover:scale-105">
            <svg class="w-4 h-4 mr-2 group-hover:rotate-12 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
            </svg>
            Logout
          </a>
        </div>
        <% } %>

        <!-- Mobile Menu Button -->
        <button id="toggleOpen" class='lg:hidden p-2 rounded-lg hover:bg-[#364151] transition-all duration-200 ml-2'>
          <svg class="w-6 h-6 fill-gray-400 hover:fill-white transition-colors duration-200" viewBox="0 0 24 24">
            <path fill-rule="evenodd" d="M3 6a1 1 0 011-1h16a1 1 0 110 2H4a1 1 0 01-1-1zM3 12a1 1 0 011-1h16a1 1 0 110 2H4a1 1 0 01-1-1zM3 18a1 1 0 011-1h16a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Navigation Menu -->
  <div id="collapseMenu" class='lg:hidden hidden bg-[#1a1a1a] border-t border-gray-800'>
    <div class='px-4 py-3 space-y-1'>
      <% categories.forEach(category => { %>
      <a href='/categoryView?fetchCategory=<%= category._id %>' 
         class='block px-4 py-3 text-sm font-medium text-gray-300 hover:text-white hover:bg-[#364151] rounded-lg transition-all duration-200'>
        <%= category.collectionName.charAt(0).toUpperCase() + category.collectionName.slice(1).toLowerCase() %>
      </a>
      <% }) %>
      <a href="/allProducts" 
         class='block px-4 py-3 text-sm font-medium text-gray-300 hover:text-white hover:bg-[#364151] rounded-lg transition-all duration-200'>
        All Products
      </a>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle functionality
  const toggleOpen = document.getElementById('toggleOpen');
  const collapseMenu = document.getElementById('collapseMenu');

  toggleOpen.addEventListener('click', () => {
    collapseMenu.classList.toggle('hidden');
    
    // Add smooth slide animation
    if (!collapseMenu.classList.contains('hidden')) {
      collapseMenu.style.maxHeight = '0';
      collapseMenu.style.opacity = '0';
      setTimeout(() => {
        collapseMenu.style.maxHeight = '400px';
        collapseMenu.style.opacity = '1';
        collapseMenu.style.transition = 'max-height 0.3s ease-out, opacity 0.3s ease-out';
      }, 10);
    }
  });

  // Close mobile menu when clicking outside
  document.addEventListener('click', (e) => {
    if (!toggleOpen.contains(e.target) && !collapseMenu.contains(e.target)) {
      collapseMenu.classList.add('hidden');
    }
  });

  // Add scroll effect to header
  let lastScrollTop = 0;
  const header = document.querySelector('header');
  
  window.addEventListener('scroll', () => {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    
    if (scrollTop > lastScrollTop && scrollTop > 100) {
      // Scrolling down
      header.style.transform = 'translateY(-100%)';
    } else {
      // Scrolling up
      header.style.transform = 'translateY(0)';
    }
    
    lastScrollTop = scrollTop;
  }, { passive: true });
</script>